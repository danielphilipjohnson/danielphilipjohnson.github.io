---
/**
 * Props:
 *  - variant: 'primary' | 'secondary' | 'tertiary' | 'outline' | 'destructive' | 'ghost' | 'link' | 'clay'
 *  - size: 'sm' | 'md' | 'lg' | 'icon'
 *  - as: 'button' | 'a' (default 'button')
 *  - href?: string (when as='a')
 *  - fullWidth?: boolean
 */
const {
  variant = "primary",
  size = "md",
  as = "button",
  href,
  fullWidth = false,
  ...attrs
} = Astro.props;
const base =
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md font-medium transition-all focus-visible:outline-none [&_svg]:shrink-0 [&_svg]:size-4";
const v =
  {
    primary:
      "bg-[color:var(--color-moss-600)] text-[color:var(--color-stone-50)] hover:bg-[color:var(--color-moss-500)]",
    secondary:
      "bg-[color:var(--color-water-500)] text-[color:var(--color-stone-50)] hover:bg-[color:var(--color-water-400)]",
    tertiary:
      "bg-[color:var(--color-stone-200)] text-[color:var(--color-stone-800)] hover:bg-[color:var(--color-stone-300)]",
    outline:
      "border border-[color:var(--color-moss-600)] text-[color:var(--color-moss-700)] bg-transparent hover:bg-[color:var(--color-moss-50)]",
    destructive:
      "bg-[color:var(--color-danger-500)] text-white hover:bg-[color:var(--color-danger-400)]",
    ghost:
      "bg-transparent text-[color:var(--color-moss-700)] hover:bg-[color:var(--color-moss-50)]",
    link: "bg-transparent text-[color:var(--color-water-700)] underline underline-offset-4 hover:no-underline p-0 h-auto",
    clay: "bg-[color:var(--color-clay-600)] text-[color:var(--color-stone-50)] hover:bg-[color:var(--color-clay-500)]",
  }[variant] ?? "";
const s =
  {
    sm: "h-8 px-3 text-xs",
    md: "h-9 px-4 text-sm",
    lg: "h-11 px-6 text-base",
    icon: "h-9 w-9 p-0 [&_svg]:size-5",
  }[size] ?? "";
const ring =
  "focus-visible:ring-2 focus-visible:ring-[color:var(--accent)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--bg)]";
const width = fullWidth ? "w-full" : "";
const cls = `${base} ${v} ${s} ${ring} ${width}`;
---

{
  as === "a" ? (
    <a href={href} class={cls} {...attrs}>
      <slot />
    </a>
  ) : (
    <button type="button" class={cls} {...attrs}>
      <slot />
    </button>
  )
}
